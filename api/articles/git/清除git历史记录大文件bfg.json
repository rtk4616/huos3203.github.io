{"title":"清除git历史记录大文件bfg","slug":"git/清除git历史记录大文件bfg","date":"2015-10-20T11:17:27.000Z","updated":"2018-03-28T07:42:14.000Z","comments":true,"path":"api/articles/git/清除git历史记录大文件bfg.json","excerpt":null,"covers":null,"content":"<link rel=\"stylesheet\" href=\"/owl.css\"><link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><script class=\"meting-secondary-script-marker\" src=\"/assets/js/Meting.min.js\"></script><ol>\n<li><a href=\"https://search.maven.org/remote_content?g=com.madgag&amp;a=bfg&amp;v=LATEST\" target=\"_blank\" rel=\"noopener\">下载bfg</a> 到本地soft/bfg目录下。</li>\n<li>sudo vi ~/.bash_profile  添加如下：</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alias bfg=&quot;java -jar ~/Downloads/soft/bfg/bfg.jar&quot;</span><br></pre></td></tr></table></figure>\n<ol>\n<li>cd 到库目录，执行bfg命令： <a href=\"https://rtyley.github.io/bfg-repo-cleaner/\" target=\"_blank\" rel=\"noopener\">bfg官网</a> </li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ cd PBB_SSH所属目录下</span><br><span class=\"line\">$ bfg --delete-folders universal --no-blob-protection  PBB_SSH</span><br><span class=\"line\">$ cd PBB_SSH</span><br><span class=\"line\">$ git reflog expire --expire=now --all &amp;&amp; git gc --prune=now --aggressive</span><br><span class=\"line\">$ git push</span><br></pre></td></tr></table></figure>\n","categories":[{"name":"git","path":"api/categories/git.json"},{"name":"工具","path":"api/categories/工具.json"}],"tags":[{"name":"工具","path":"api/tags/工具.json"},{"name":"坑","path":"api/tags/坑.json"},{"name":"git","path":"api/tags/git.json"}]}