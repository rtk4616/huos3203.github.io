{"title":"初步搭建Octopress","slug":"hexo/初步搭建Octopress","date":"2014-06-09T23:26:22.000Z","updated":"2018-03-28T07:42:14.000Z","comments":true,"path":"api/articles/hexo/初步搭建Octopress.json","excerpt":"软件支持：Github:后台新建项目，点击下载iTerm2:可以替代mac终端，相当强大。下载ruby:ruby安装包  下载Mou:MarkDown编辑软件，可用于后期发布博客文章。下载Xcode：它将帮助你安装好Unix环境需要的开发包。￼<br>","covers":["/images/sourceFrame.png"],"content":"<link rel=\"stylesheet\" href=\"/owl.css\"><script src=\"/assets/js/APlayer.min.js\"> </script><h1 id=\"软件支持：\"><a href=\"#软件支持：\" class=\"headerlink\" title=\"软件支持：\"></a>软件支持：</h1><ol>\n<li><strong>Github</strong>:后台新建项目，点击<a href=\"https://help.github.com/articles/set­up­git\" target=\"_blank\" rel=\"noopener\">下载</a></li>\n<li><strong>iTerm2</strong>:可以替代mac终端，相当强大。<a href=\"http://www.iterm2.com/#/section/home\" target=\"_blank\" rel=\"noopener\">下载</a></li>\n<li><strong>ruby</strong>:ruby安装包  <a href=\"http://ruby.taobao.org/mirrors/ruby/\" target=\"_blank\" rel=\"noopener\">下载</a></li>\n<li><strong>Mou</strong>:MarkDown编辑软件，可用于后期发布博客文章。<a href=\"http://mouapp.com/\" target=\"_blank\" rel=\"noopener\">下载</a></li>\n<li><strong>Xcode</strong>：它将帮助你安装好Unix环境需要的开发包。</li>\n</ol>\n<p>￼<!--显示文章缩略部分的标记方法--><br><a id=\"more\"></a></p>\n<h1 id=\"学习目的：\"><a href=\"#学习目的：\" class=\"headerlink\" title=\"学习目的：\"></a>学习目的：</h1><p>要求:搭建一个独立博客网站,首先要有台连接到英特网服务器,要有前端的页面和后端的数据库,以及域名等.</p>\n<ol>\n<li><p>github可以提供给我们的是,github一个免费的代码托管仓库,它支持用户html页面的显示,用户可以上传HTML文件,然后在远程像访问网页一样访问它。</p>\n</li>\n<li><p>这时，博客还缺具有管理能力的网站后台,github不提供数据库等，对于博客这种数据规模很小,便可返璞归真,用回静态页面。</p>\n</li>\n<li><strong>Octopress</strong>:能将易于编写的<strong>Markdown</strong>的文本，翻译成为繁琐的<strong>html</strong>页面，同时帮助用户管理<strong>html</strong>页面并发布到github page上。</li>\n</ol>\n<h1 id=\"搭建环境：\"><a href=\"#搭建环境：\" class=\"headerlink\" title=\"搭建环境：\"></a>搭建环境：</h1><ol>\n<li><p><strong>Github</strong>:既然要托管到github,那么便要有github的环境. 检查本机的git环境,在命令行输入 <code>git--version</code></p>\n</li>\n<li><p><strong>Octopress</strong>:是基于Jekyll的,需要ruby的环境编译。检查本机ruby环境，命令行：<code>ruby-v</code>ruby的version1.9.3以上,新版的Mac,这些都是有装的。</p>\n</li>\n<li><strong>gcc</strong>和<strong>make</strong>,ruby的环境需要gcc,这个会通过安装xcode的command line tool来完成安装 检查本机gcc环境，命令行：<code>gcc -v</code></li>\n</ol>\n<h1 id=\"安装Octpress\"><a href=\"#安装Octpress\" class=\"headerlink\" title=\"安装Octpress:\"></a>安装Octpress:</h1><p>通过Git安装:</p>\n<ul>\n<li>下载<strong>Octopress</strong>：<code>gitclonegit://github.com/imathis/octopress.git octopress</code></li>\n<li>进入<strong>Octopress</strong>目录：<code>cd octopress</code></li>\n<li>安装必要的依赖包：<ul>\n<li><code>gem install bundler</code></li>\n<li><code>rbenv rehash</code> # If you use rbenv, rehash to be able to run the bundle command</li>\n<li><code>bundle install</code></li>\n</ul>\n</li>\n<li>最后安装Octopress:<code>rake install</code></li>\n</ul>\n<h2 id=\"配置：\"><a href=\"#配置：\" class=\"headerlink\" title=\"配置：\"></a>配置：</h2><ul>\n<li>修改配置文件<strong>_config.yml</strong>：<ul>\n<li>配置个人站点的信息：<strong>url</strong>:git远程库地址，<strong>title</strong>:博客题目,<strong>author</strong>:作者名,等。<ul>\n<li>注意：最好将twitter相关的配置信息全部删掉,否则由于GFW的原因,将会造成页面load很慢。</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>修改定制文件：/source/_includes/custom/head.html把google的自定义字体去掉,原因同上。</li>\n</ul>\n<h2 id=\"写博客：\"><a href=\"#写博客：\" class=\"headerlink\" title=\"写博客：\"></a>写博客：</h2><p>博文是用markdown语法，另外扩充一些插件，网上相关介绍很多，例如：<a href=\"http://daringfireball.net/projects/markdown/\" target=\"_blank\" rel=\"noopener\">这个</a></p>\n<ul>\n<li><p>新建Markdown文件:          <code>rake new_post[&#39;文章名&#39;]</code>或 <code>rake new_page[&#39;404&#39;]</code></p>\n</li>\n<li><p>翻译Mardown为静态文件:   <code>rake generate</code></p>\n</li>\n<li><p>检测文件变化：            <code>rake watch</code></p>\n</li>\n<li><p>启动本机测试端口4000：  <code>rake preview</code></p>\n</li>\n<li><p>发布至git库：            <code>rake deploy</code></p>\n</li>\n</ul>\n<h2 id=\"添加多说：\"><a href=\"#添加多说：\" class=\"headerlink\" title=\"添加多说：\"></a>添加多说：</h2><p>  需要在多说网注册个帐号，添加站点，获取站点 <font color=\"red\">short_name</font>.</p>\n<ul>\n<li><p>######底部评论：</p>\n<ul>\n<li>在 <font color=\"red\"> _config.yml</font>     中添加<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#duoshuo comments</span></span><br><span class=\"line\"><span class=\"symbol\">duoshuo_comments:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"symbol\">duoshuo_short_name:</span> yourname</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>在<font color=\"red\"><code>source/_layouts/post.html</code></font>中的<font color=\"red\"> disqus</font>代码：</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123; % <span class=\"keyword\">if</span> site.disqus_short_name and page.comments == <span class=\"literal\">true</span> % &#125;</span><br><span class=\"line\">\t&lt;section&gt;</span><br><span class=\"line\">\t\t&lt;h1&gt;Comments&lt;<span class=\"regexp\">/h1&gt;</span></span><br><span class=\"line\"><span class=\"regexp\"> \t\t&lt;div id=\"disqus_thread\" aria-live=\"polite\"&gt;&#123; % include post/</span>disqus_thread.html % &#125;&lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">\t&lt;/</span>section&gt;</span><br><span class=\"line\">&#123; % endif % &#125;</span><br></pre></td></tr></table></figure>\n<p>下方添加 <font color=\"red\">多说评论</font> 模块:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123; % <span class=\"keyword\">if</span> site.duoshuo_short_name and site.duoshuo_comments == <span class=\"literal\">true</span> and  page.comments == <span class=\"literal\">true</span> % &#125;</span><br><span class=\"line\">&lt;section&gt;</span><br><span class=\"line\"> \t\t\t&lt;h1&gt;Comments&lt;<span class=\"regexp\">/h1&gt;</span></span><br><span class=\"line\"><span class=\"regexp\"> \t\t\t\t&lt;div id=\"comments\" aria-live=\"polite\"&gt;&#123; % include post/</span>duoshuo.html % &#125;&lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\"> \t\t\t\t&lt;/</span>section&gt;</span><br><span class=\"line\">&#123; % endif % &#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>然后就按路径创建一个<font color=\"red\">source/_includes/post/duoshuo.html</font></li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- Duoshuo Comment BEGIN --&gt;</span><br><span class=\"line\">&lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">\"ds-thread\"</span> data-title=<span class=\"string\">\"\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">&lt;script type=<span class=\"string\">\"text/javascript\"</span>&gt;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> duoshuoQuery = &#123;<span class=\"attr\">short_name</span>:<span class=\"string\">\"\"</span>&#125;;</span><br><span class=\"line\">  (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> ds = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'script'</span>);</span><br><span class=\"line\">    ds.type = <span class=\"string\">'text/javascript'</span>;</span><br><span class=\"line\">    ds.async = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    ds.src = <span class=\"string\">'http://static.duoshuo.com/embed.js'</span>;</span><br><span class=\"line\">    ds.charset = <span class=\"string\">'UTF-8'</span>;</span><br><span class=\"line\">    (<span class=\"built_in\">document</span>.getElementsByTagName(<span class=\"string\">'head'</span>)[<span class=\"number\">0</span>]  || <span class=\"built_in\">document</span>.getElementsByTagName(<span class=\"string\">'body'</span>)[<span class=\"number\">0</span>]).appendChild(ds);</span><br><span class=\"line\">    &#125;)();</span><br><span class=\"line\">&lt;<span class=\"regexp\">/script&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">&lt;!-- Duoshuo Comment END --&gt;</span></span><br></pre></td></tr></table></figure>\n<p>随后，再修改 <font color=\"red\">_includes/article.html </font>文件,<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123; % <span class=\"keyword\">if</span> site.disqus_short_name and page.comments != <span class=\"literal\">false</span> and post.comments !=<span class=\"literal\">false</span> and site.disqus_show_comment_count == <span class=\"literal\">true</span> % &#125;</span><br><span class=\"line\">\t\t\t | &lt;a href=\"&#123; % if index % &#125;&#123;&#123; root_url &#125;&#125;&#123;&#123; post.url &#125;&#125;&#123; % endif % &#125;#disqus_thread\"&gt;Comments&lt;/a&gt;</span><br><span class=\"line\">&#123; % endif % &#125;</span><br></pre></td></tr></table></figure></p>\n<p>下方添加如下<font color=\"red\">多说评论链接路径</font>：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123; % <span class=\"keyword\">if</span> site.duoshuo_short_name and page.comments != <span class=\"literal\">false</span> and post.comments != <span class=\"literal\">false</span> and site.duoshuo_comments == <span class=\"literal\">true</span> % &#125;</span><br><span class=\"line\">| <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">\"&#123; % if index % &#125;&#123; % endif % &#125;#comments\"</span>&gt;</span>Comments<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span></span><br><span class=\"line\">&#123; % endif % &#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>######首页侧边栏插入最新评论</p>\n<ul>\n<li><p>首先在 _config.yml 中再插入如下代码</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"symbol\">duoshuo_asides_num:</span> <span class=\"number\">10</span>      <span class=\"comment\"># 侧边栏评论显示条目数</span></span><br><span class=\"line\"><span class=\"symbol\">duoshuo_asides_avatars:</span> <span class=\"number\">0</span>   <span class=\"comment\"># 侧边栏评论是否显示头像</span></span><br><span class=\"line\"><span class=\"symbol\">duoshuo_asides_time:</span> <span class=\"number\">0</span>      <span class=\"comment\"># 侧边栏评论是否显示时间</span></span><br><span class=\"line\"><span class=\"symbol\">duoshuo_asides_title:</span> <span class=\"number\">0</span>     <span class=\"comment\"># 侧边栏评论是否显示标题</span></span><br><span class=\"line\"><span class=\"symbol\">duoshuo_asides_admin:</span> <span class=\"number\">0</span>     <span class=\"comment\"># 侧边栏评论是否显示作者评论</span></span><br><span class=\"line\"><span class=\"symbol\">duoshuo_asides_length:</span> <span class=\"number\">18</span>   <span class=\"comment\"># 侧边栏评论截取的长度</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>再创建 <font color=\"red\">_includes/custom/asides/recent_comments.html</font></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">section</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Recent Comments<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">class</span>=<span class=\"string\">\"ds-recent-comments\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">data-num-items</span>=<span class=\"string\">\"\"</span></span></span><br><span class=\"line\"><span class=\"tag\">     <span class=\"attr\">data-show-avatars</span>=<span class=\"string\">\"\"</span></span></span><br><span class=\"line\"><span class=\"tag\">      <span class=\"attr\">data-show-time</span>=<span class=\"string\">\"\"</span></span></span><br><span class=\"line\"><span class=\"tag\">       <span class=\"attr\">data-show-title</span>=<span class=\"string\">\"\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">data-show-admin</span>=<span class=\"string\">\"\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">data-excerpt-length</span>=<span class=\"string\">\"\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">   &#123; % if index % &#125;</span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 多说js加载开始，一个页面只需要加载一次 --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/javascript\"</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"javascript\">\t\t  <span class=\"keyword\">var</span> duoshuoQuery = &#123;<span class=\"attr\">short_name</span>:<span class=\"string\">\"\"</span>&#125;;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t  (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t    <span class=\"keyword\">var</span> ds = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'script'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t    ds.type = <span class=\"string\">'text/javascript'</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t    ds.async = <span class=\"literal\">true</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t    ds.src = <span class=\"string\">'http://static.duoshuo.com/embed.js'</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t    ds.charset = <span class=\"string\">'UTF-8'</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t    (<span class=\"built_in\">document</span>.getElementsByTagName(<span class=\"string\">'head'</span>)[<span class=\"number\">0</span>]  ||</span></span><br><span class=\"line\"><span class=\"javascript\">\t\t    <span class=\"built_in\">document</span>.getElementsByTagName(<span class=\"string\">'body'</span>)[<span class=\"number\">0</span>]).appendChild(ds);</span></span><br><span class=\"line\"><span class=\"undefined\">\t\t    &#125;)();</span></span><br><span class=\"line\"><span class=\"undefined\">\t\t</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 多说js加载结束，一个页面只需要加载一次 --&gt;</span></span><br><span class=\"line\">   &#123; % endif % &#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">section</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n</li>\n<li><p>最后修改：<font color=\"red\">_config.yml </font>配置:</p>\n<ul>\n<li>方式一：在<font color=\"red\"> blog_index_asides</font> 行或 <font color=\"red\">page_asides </font>行或 <font color=\"red\">post_asides </font>添加：</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"symbol\">blog_index_asides:</span>[custom/asides/recent_comments.html]</span><br><span class=\"line\">或</span><br><span class=\"line\"><span class=\"symbol\">page_asides:</span>[custom/asides/recent_comments.html]</span><br><span class=\"line\">或</span><br><span class=\"line\"><span class=\"symbol\">post_asides:</span>[custom/asides/recent_comments.html]</span><br></pre></td></tr></table></figure>\n<ul>\n<li><p>方式二：将路径添加到 default_asides:[…] 中</p>\n<figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"symbol\">default_asides:</span> [custom/asides/recent_comments.html, asides/recent_posts.html, ...]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Update</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">多说评论似乎升级了系统，无法自动获取到页面文章标题，所以手动在评论页插入 data-title。--2013.09.10</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h1 id=\"Tips\"><a href=\"#Tips\" class=\"headerlink\" title=\"Tips:\"></a>Tips:</h1><ul>\n<li><h6 id=\"发布图文：\"><a href=\"#发布图文：\" class=\"headerlink\" title=\"发布图文：\"></a>发布图文：</h6></li>\n</ul>\n<p>如果在文章中上传图片：</p>\n<pre><code>* 直接copy到/source/images目录即可。便可以以相对路径(/images/imgname.png)的形式，在文章中引用。\n\n* 或找一个图库站点，例如flickr之类，然后在文章中引用该图片远程路径即可。\n</code></pre><ul>\n<li><h6 id=\"域名：\"><a href=\"#域名：\" class=\"headerlink\" title=\"域名：\"></a>域名：</h6>如果有自己的域名空间，可以将域名指向自己的博客，步骤如下：</li>\n</ul>\n<pre><code>* **配置DNS(需购买域名)**:在域名管理中，新建一个CNAME指向，将自己的域名指向yourname.github.com.\n\n* **给repo配置域名**:在source目录里，新建一个名为CNAME的文件，然后将自己的域名输入即可。\n\n* 将内容push到github后，大概需审核一个小时左右生效，然后就可以使用自己的域名访问该博客了。\n</code></pre><ul>\n<li><h6 id=\"添加百度统计和google-analytics\"><a href=\"#添加百度统计和google-analytics\" class=\"headerlink\" title=\"添加百度统计和google analytics\"></a>添加百度统计和google analytics</h6><ul>\n<li>从<a href=\"http://tongji.baidu.com/\" target=\"_blank\" rel=\"noopener\">百度统计</a>获取脚本,然后添加到文件source/_includes/after_footer.html文件中。</li>\n<li>从<a href=\"https://support.google.com/analytics/\" target=\"_blank\" rel=\"noopener\">google analytics</a>获取跟踪ID,然后将这个ID添加到_config.yml文件的google_analytics_tracking_id后面即可。<!--![alt text](https://github.com/adam-p/markdown-here/raw/master/src/common/images/icon48.png \"title text\")-->\n</li>\n</ul>\n</li>\n<li><p><strong>Octopress</strong>目录结构，及之间的关系：</p>\n</li>\n</ul>\n<p>￼<img src=\"/images/sourceFrame.png\" alt=\"alt text\" title=\"Octopress目录图解\"></p>\n<ul>\n<li><h6 id=\"原理：\"><a href=\"#原理：\" class=\"headerlink\" title=\"原理：\"></a>原理：</h6><ul>\n<li><p>Octopress版本库：</p>\n<ul>\n<li><p><strong>gh-pages</strong>分支：用于存放生成的最终网页。</p>\n</li>\n<li><p><strong>source</strong>分支:用于存放最初的markdown文件。</p>\n</li>\n</ul>\n<p>职责详述：平时写作和提交都在<strong>source</strong>分支下，当需要发布时，<code>rake deploy</code> 命令会将内容生成到public这个目录，然后将这个目录中的内容push到<strong>gh-pages</strong>分支中。</p>\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li><ul>\n<li>其中<strong>sass</strong>和<strong>source</strong>:这是博客的源代码文件目录。发布时，需要把源代码也上传到github上,这样便可以多台机写博客了。</li>\n</ul>\n</li>\n<li><ul>\n<li><strong>_deploy</strong>:是通过octopress生成的静态页面的博客文件夹,我们可以看到它的里面也有.git的文件。<ul>\n<li>cd进到该目录,使用<code>git remote ­v</code>查看<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">origin http:<span class=\"comment\">//github.com/....github.io(fetch)</span></span><br><span class=\"line\">origin http:<span class=\"comment\">//github.com/....github.io(push)</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>它会在我们使用<code>rake deploy</code>时自动push到该远程库的<strong>gh-pages</strong>分支。这时就不需要再手动push。只需要将博客源代码手动push到该远程库的<strong>source</strong>分支中.<br>  <strong>以上细节可参照Octopress根目录中Rakefile配置信息</strong></li>\n<li><ul>\n<li>使用多台电脑的同时写博客<ul>\n<li><ol>\n<li>需要先拿把<strong>source</strong> code拿下来 <code>git pull origin source</code></li>\n</ol>\n</li>\n<li><ol>\n<li><code>check in</code>更新,将本地 <strong>source</strong>分支上的代码，合并到远程仓库上<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git add .</span><br><span class=\"line\">git commit -m &apos;yourmessage&apos;</span><br><span class=\"line\">git push origin source</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"版本管理\"><a href=\"#版本管理\" class=\"headerlink\" title=\"版本管理\"></a>版本管理</h1><p>你可以先去github上新建一个空的Repo（最好是private的，否则可能会被其他人拿到你的source），拿到repo的url，然后到octopress目录下执行下面这些操作：<br><figure class=\"highlight ruby\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 因为你是从octopress github上clone的，所以需要把origin这个branch换一个名字</span></span><br><span class=\"line\">git remote rename origin octopress</span><br><span class=\"line\">git remote add origin (your github url)</span><br><span class=\"line\"><span class=\"comment\"># 把你的github branch作为默认的branch</span></span><br><span class=\"line\">git config branch.master.remote origin</span><br><span class=\"line\"><span class=\"comment\"># 把你的octopress导入到github上去</span></span><br><span class=\"line\">git push -u origin master</span><br></pre></td></tr></table></figure></p>\n<p>如果你新增加了博客或者修改了某些内容，你可以把你的改动commit到github上去：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git add source</span><br><span class=\"line\">git commit -a -m &apos;new blog or edit some blog&apos;</span><br><span class=\"line\">git push -u origin master</span><br></pre></td></tr></table></figure></p>\n<p>如果octopress有更新，你可以直接pull octopress这个branch进行更新即可<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git pull octopress master</span><br><span class=\"line\">git push -u origin master</span><br></pre></td></tr></table></figure></p>\n","categories":[{"name":"hexo","path":"api/categories/hexo.json"}],"tags":[{"name":"octopress","path":"api/tags/octopress.json"},{"name":"blog","path":"api/tags/blog.json"},{"name":"github","path":"api/tags/github.json"},{"name":"mou","path":"api/tags/mou.json"},{"name":"ruby","path":"api/tags/ruby.json"}]}