{"title":"微信小程序开发(一)","slug":"微信小程序开发-一","date":"2016-12-19T22:59:10.000Z","updated":"2017-05-26T18:13:13.000Z","comments":true,"path":"api/articles/微信小程序开发-一.json","excerpt":"创建项目我们需要通过开发者工具，来完成小程序创建和代码编辑。开发者工具安装完成后，打开并使用微信扫码登录。选择创建“项目”，填入上文获取到的 AppID ，设置一个本地项目的名称（非小程序名称），比如“我的第一个项目”，并选择一个本地的文件夹作为代码存储的目录，点击“新建项目”就可以了。为方便初学者了解微信小程序的基本代码结构，在创建过程中，如果选择的本地文件夹是个空文件夹，开发者工具会提示，是否需要创建一个 quick start 项目。选择“是”，开发者工具会帮助我们在开发目录里生成一个简单的 demo。项目创建成功后，我们就可以点击该项目，进入并看到完整的开发者工具界面，点击左侧导航，在“编辑”里可以查看和编辑我们的代码，在“调试”里可以测试代码并模拟小程序在微信客户端效果，在“项目”里可以发送到手机里预览实际效果。编写代码点击开发者工具左侧导航的“编辑”，看到这个项目文件结构。三个必不可少的app.js、app.json、app.wxss:.js后缀的是脚本文件.json后缀的文件是配置文件.wxss后缀的是样式表文件微信小程序会读取这些文件，并生成小程序实例。<br>","covers":["https://mp.weixin.qq.com/debug/wxadoc/dev/image/start_result.png?t=20161122"],"content":"<link rel=\"stylesheet\" href=\"/owl.css\"><link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><script class=\"meting-secondary-script-marker\" src=\"/assets/js/Meting.min.js\"></script><h3 id=\"创建项目\"><a href=\"#创建项目\" class=\"headerlink\" title=\"创建项目\"></a>创建项目</h3><p>我们需要通过<a href=\"https://mp.weixin.qq.com/debug/wxadoc/dev/devtools/devtools.html?t=20161122\" target=\"_blank\" rel=\"noopener\">开发者工具</a>，来完成小程序创建和代码编辑。</p>\n<p>开发者工具安装完成后，打开并使用微信扫码登录。选择创建“项目”，填入上文获取到的 AppID ，设置一个本地项目的名称（非小程序名称），比如“我的第一个项目”，并选择一个本地的文件夹作为代码存储的目录，点击“新建项目”就可以了。</p>\n<p>为方便初学者了解微信小程序的基本代码结构，在创建过程中，如果选择的本地文件夹是个空文件夹，开发者工具会提示，是否需要创建一个 quick start 项目。选择“是”，开发者工具会帮助我们在开发目录里生成一个简单的 demo。</p>\n<p>项目创建成功后，我们就可以点击该项目，进入并看到完整的开发者工具界面，点击左侧导航，在“编辑”里可以查看和编辑我们的代码，在“调试”里可以测试代码并模拟小程序在微信客户端效果，在“项目”里可以发送到手机里预览实际效果。</p>\n<h3 id=\"编写代码\"><a href=\"#编写代码\" class=\"headerlink\" title=\"编写代码\"></a>编写代码</h3><p>点击开发者工具左侧导航的“编辑”，看到这个项目文件结构。</p>\n<p>三个必不可少的<code>app.js、app.json、app.wxss</code>:</p>\n<ul>\n<li><code>.js</code>后缀的是脚本文件</li>\n<li><code>.json</code>后缀的文件是配置文件</li>\n<li><code>.wxss</code>后缀的是样式表文件</li>\n</ul>\n<p>微信小程序会读取这些文件，并生成小程序实例。<br><a id=\"more\"></a></p>\n<h4 id=\"app-js脚本代码\"><a href=\"#app-js脚本代码\" class=\"headerlink\" title=\"app.js脚本代码\"></a>app.js脚本代码</h4><p>app.json 是对整个小程序的全局配置。 可以在这个文件中监听并处理小程序的生命周期函数、声明全局变量。</p>\n<blockquote>\n<p>调用框架提供的丰富的 API，如本例的同步存储及同步读取本地数据。想了解更多可用 API，可参考 <a href=\"https://mp.weixin.qq.com/debug/wxadoc/dev/api/?t=20161122\" target=\"_blank\" rel=\"noopener\">API 文档</a></p>\n</blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//app.js</span></span><br><span class=\"line\">App(&#123;</span><br><span class=\"line\">  onLaunch: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//调用API从本地缓存中获取数据</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> logs = wx.getStorageSync(<span class=\"string\">'logs'</span>) || []</span><br><span class=\"line\">    logs.unshift(<span class=\"built_in\">Date</span>.now())</span><br><span class=\"line\">    wx.setStorageSync(<span class=\"string\">'logs'</span>, logs)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  getUserInfo:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">cb</span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> that = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(<span class=\"keyword\">this</span>.globalData.userInfo)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">typeof</span> cb == <span class=\"string\">\"function\"</span> &amp;&amp; cb(<span class=\"keyword\">this</span>.globalData.userInfo)</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">      <span class=\"comment\">//调用登录接口</span></span><br><span class=\"line\">      wx.login(&#123;</span><br><span class=\"line\">        success: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">          wx.getUserInfo(&#123;</span><br><span class=\"line\">            success: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">              that.globalData.userInfo = res.userInfo;</span><br><span class=\"line\">              <span class=\"keyword\">typeof</span> cb == <span class=\"string\">\"function\"</span> &amp;&amp; cb(that.globalData.userInfo)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  globalData:&#123;</span><br><span class=\"line\">    userInfo:<span class=\"literal\">null</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h4 id=\"app-json-全局配置\"><a href=\"#app-json-全局配置\" class=\"headerlink\" title=\"app.json 全局配置\"></a>app.json 全局配置</h4><p>可以在这个文件中配置小程序是由哪些页面组成，配置小程序的窗口\b背景色，配置导航条样式，配置默认标题。<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"pages\"</span>:[</span><br><span class=\"line\">    <span class=\"string\">\"pages/index/index\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"pages/logs/logs\"</span></span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"string\">\"window\"</span>:&#123;</span><br><span class=\"line\">    <span class=\"string\">\"backgroundTextStyle\"</span>:<span class=\"string\">\"light\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"navigationBarBackgroundColor\"</span>: <span class=\"string\">\"#fff\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"navigationBarTitleText\"</span>: <span class=\"string\">\"WeChat\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"navigationBarTextStyle\"</span>:<span class=\"string\">\"black\"</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<blockquote>\n<p>注意该文件不可添加任何注释。更多配置可参考<a href=\"https://mp.weixin.qq.com/debug/wxadoc/dev/framework/config.html?t=20161122\" target=\"_blank\" rel=\"noopener\">配置详解</a></p>\n</blockquote>\n<h4 id=\"app-wxss-公共样式表\"><a href=\"#app-wxss-公共样式表\" class=\"headerlink\" title=\"app.wxss 公共样式表\"></a>app.wxss 公共样式表</h4><p>我们可以在页面组件的 class 属性上直接使用 app.wxss 中声明的样式规则<br><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**app.wxss**/</span></span><br><span class=\"line\"><span class=\"selector-class\">.container</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">  <span class=\"attribute\">flex-direction</span>: column;</span><br><span class=\"line\">  <span class=\"attribute\">align-items</span>: center;</span><br><span class=\"line\">  <span class=\"attribute\">justify-content</span>: space-between;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">200</span>rpx <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">box-sizing</span>: border-box;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"创建页面\"><a href=\"#创建页面\" class=\"headerlink\" title=\"创建页面\"></a>创建页面</h3><p>在这个教程里，我们有两个页面，index 欢迎页和 logs 小程序启动日志的展示页，他们都在 pages 目录下。</p>\n<p>微信小程序中的每一个页面的【路径+页面名】都需要写在 app.json 的 pages 中，且 pages 中的第一个页面是小程序的首页。</p>\n<p>每一个小程序页面是由同路径下同名的四个不同后缀文件的组成:</p>\n<ul>\n<li>.js后缀的文件是脚本文件</li>\n<li>.json后缀的文件是配置文件（非必须）</li>\n<li>.wxss后缀的是样式表文件（非必须）</li>\n<li>.wxml后缀的文件是页面结构文件  </li>\n</ul>\n<h4 id=\"index-wxml页面结构：\"><a href=\"#index-wxml页面结构：\" class=\"headerlink\" title=\"index.wxml页面结构：\"></a>index.wxml页面结构：</h4><p>使用了<code>&lt;view/&gt;、&lt;image/&gt;、&lt;text/&gt;</code>来搭建页面结构(container)，绑定数据(userInfo)和交互处理函数(bindViewTap)。<br><figure class=\"highlight md\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!--index.wxml--&gt;</span><br><span class=\"line\">&lt;view class=\"container\"&gt;</span><br><span class=\"line\">  &lt;view  bindtap=\"bindViewTap\" class=\"userinfo\"&gt;</span><br><span class=\"line\"><span class=\"code\">    &lt;image class=\"userinfo-avatar\" src=\"&#123;&#123;userInfo.avatarUrl&#125;&#125;\" background-size=\"cover\"&gt;&lt;/image&gt;</span></span><br><span class=\"line\"><span class=\"code\">    &lt;text class=\"userinfo-nickname\"&gt;&#123;&#123;userInfo.nickName&#125;&#125;&lt;/text&gt;</span></span><br><span class=\"line\">  &lt;/view&gt;</span><br><span class=\"line\">  &lt;view class=\"usermotto\"&gt;</span><br><span class=\"line\"><span class=\"code\">    &lt;text class=\"user-motto\"&gt;&#123;&#123;motto&#125;&#125;&lt;/text&gt;</span></span><br><span class=\"line\">  &lt;/view&gt;</span><br><span class=\"line\">&lt;/view&gt;</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"index-js脚本文件\"><a href=\"#index-js脚本文件\" class=\"headerlink\" title=\"index.js脚本文件\"></a>index.js脚本文件</h4><p>在这个文件中我们可以监听并处理页面的生命周期函数、获取小程序实例，声明并处理数据，响应页面交互事件等。<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//index.js</span></span><br><span class=\"line\"><span class=\"comment\">//获取应用实例</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> app = getApp()</span><br><span class=\"line\">Page(&#123;</span><br><span class=\"line\">  data: &#123;</span><br><span class=\"line\">    motto: <span class=\"string\">'Hello World'</span>,</span><br><span class=\"line\">    userInfo: &#123;&#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">//事件处理函数</span></span><br><span class=\"line\">  bindViewTap: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    wx.navigateTo(&#123;</span><br><span class=\"line\">      url: <span class=\"string\">'../logs/logs'</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  onLoad: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'onLoad'</span>)</span><br><span class=\"line\">    <span class=\"keyword\">var</span> that = <span class=\"keyword\">this</span></span><br><span class=\"line\">    <span class=\"comment\">//调用应用实例的方法获取全局数据</span></span><br><span class=\"line\">    app.getUserInfo(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">userInfo</span>)</span>&#123;</span><br><span class=\"line\">      <span class=\"comment\">//更新数据</span></span><br><span class=\"line\">      that.setData(&#123;</span><br><span class=\"line\">        userInfo:userInfo</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"index-wxss样式表\"><a href=\"#index-wxss样式表\" class=\"headerlink\" title=\"index.wxss样式表\"></a>index.wxss样式表</h4><ol>\n<li>页面的样式表是非必要的,该样式表中的样式规则会层叠覆盖 app.wxss 中的样式规则。</li>\n<li>页面的结构文件中可以直接使用 app.wxss 中指定的样式规则。</li>\n</ol>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**index.wxss**/</span></span><br><span class=\"line\"><span class=\"selector-class\">.userinfo</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">  <span class=\"attribute\">flex-direction</span>: column;</span><br><span class=\"line\">  <span class=\"attribute\">align-items</span>: center;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.userinfo-avatar</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">128</span>rpx;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">128</span>rpx;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">20</span>rpx;</span><br><span class=\"line\">  <span class=\"attribute\">border-radius</span>: <span class=\"number\">50%</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.userinfo-nickname</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"number\">#aaa</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.usermotto</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">margin-top</span>: <span class=\"number\">200px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"index-json配置文件\"><a href=\"#index-json配置文件\" class=\"headerlink\" title=\"index.json配置文件\"></a>index.json配置文件</h4><p>页面的配置文件是非必要的。当有页面的配置文件时，配置项在该页面会覆盖 app.json 的 window 中相同的配置项。如果没有指定的页面配置文件，则在该页面直接使用 app.json 中的默认配置。</p>\n<h3 id=\"logs-的页面\"><a href=\"#logs-的页面\" class=\"headerlink\" title=\"logs 的页面\"></a>logs 的页面</h3><h4 id=\"logs-wxml页面结构\"><a href=\"#logs-wxml页面结构\" class=\"headerlink\" title=\"logs.wxml页面结构\"></a>logs.wxml页面结构</h4><figure class=\"highlight md\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!--logs.wxml--&gt;</span><br><span class=\"line\">&lt;view class=\"container log-list\"&gt;</span><br><span class=\"line\">  &lt;block wx:for=\"&#123;&#123;logs&#125;&#125;\" wx:for-item=\"log\"&gt;</span><br><span class=\"line\"><span class=\"code\">    &lt;text class=\"log-item\"&gt;&#123;&#123;index + 1&#125;&#125;. &#123;&#123;log&#125;&#125;&lt;/text&gt;</span></span><br><span class=\"line\">  &lt;/block&gt;</span><br><span class=\"line\">&lt;/view&gt;</span><br></pre></td></tr></table></figure>\n<h4 id=\"logs-js脚本文件\"><a href=\"#logs-js脚本文件\" class=\"headerlink\" title=\"logs.js脚本文件\"></a>logs.js脚本文件</h4><p>logs 页面使用 <code>&lt;block/&gt;</code> 控制标签来组织代码，在 <code>&lt;block/&gt;</code> 上使用 <code>wx:for</code> 绑定 logs 数据，并将 logs 数据循环展开节点<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//logs.js</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> util = <span class=\"built_in\">require</span>(<span class=\"string\">'../../utils/util.js'</span>)</span><br><span class=\"line\">Page(&#123;</span><br><span class=\"line\">  data: &#123;</span><br><span class=\"line\">    logs: []</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  onLoad: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.setData(&#123;</span><br><span class=\"line\">      logs: (wx.getStorageSync(<span class=\"string\">'logs'</span>) || []).map(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">log</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> util.formatTime(<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(log))</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">运行结果如下：</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"运行结果如下：\"><a href=\"#运行结果如下：\" class=\"headerlink\" title=\"运行结果如下：\"></a>运行结果如下：</h3><p><img src=\"https://mp.weixin.qq.com/debug/wxadoc/dev/image/start_result.png?t=20161122\" alt=\"\"></p>\n","categories":[{"name":"其他","path":"api/categories/其他.json"},{"name":"小程序","path":"api/categories/小程序.json"}],"tags":[{"name":"小程序","path":"api/tags/小程序.json"}]}