{"title":"storyboard的几种方式","slug":"iOS/storyboard的几种方式","date":"2018-06-20T14:49:37.000Z","updated":"2018-06-20T14:49:37.000Z","comments":true,"path":"api/articles/iOS/storyboard的几种方式.json","excerpt":null,"covers":null,"content":"<link rel=\"stylesheet\" href=\"/owl.css\"><link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><script class=\"meting-secondary-script-marker\" src=\"/assets/js/Meting.min.js\"></script><h2 id=\"通过IB（xib-storyboard）创建View的周期方法\"><a href=\"#通过IB（xib-storyboard）创建View的周期方法\" class=\"headerlink\" title=\"通过IB（xib/storyboard）创建View的周期方法\"></a>通过IB（xib/storyboard）创建View的周期方法</h2><ol>\n<li><code>loadView</code>：加载View方法，UI是通过代码绘制时，初始化控制器的视图时，会调用该方法。优先级高于IB视图，当重载时，会直接覆盖IB中的视图,因为无论nib也好，xib也好，最终在执行UIViewController生命周期函数<code>loadView</code>之前，都会转化成可执行的nib文件。</li>\n<li><code>initWithNibName</code>：是类的构造器方法，通过IB创建的类：简称<code>IB类</code>，<code>IB类</code>需要通过这个构造器来实例化对象。</li>\n<li><code>initWithCoder</code>：当<code>IB类</code>实例化时会调用该方法，即通过<code>initWithNibName</code>构造器实例化对象时，会调用该方法来分配<code>IB对象</code>的内存空间。</li>\n<li><code>awakeFromNib</code>：当实例化<code>IB视图类</code>时执行，即当IB文件被加载的时候，会发送一个<code>awakeFromNib</code>的消息到IB文件中的每个的对象，每个对象都可以定义自己的awakeFromNib函数来响应这个消息，执行一些必要的操作。<blockquote>\n<p>帮助记忆：一开始经过<code>initWithCoder</code>创建出来的控件是死的，然后通过<code>awakeFromNib</code>来唤醒，所以这会有一个先后的调用顺序</p>\n</blockquote>\n</li>\n<li><code>viewDidLoad</code>：当view对象被加载到内存后就会执行viewDidLoad，所以不管通过nib文件还是代码的方式创建对象都会执行viewDidLoad 。</li>\n</ol>\n<h2 id=\"加载xib方法\"><a href=\"#加载xib方法\" class=\"headerlink\" title=\"加载xib方法\"></a>加载xib方法</h2><h3 id=\"加载视图\"><a href=\"#加载视图\" class=\"headerlink\" title=\"加载视图\"></a>加载视图</h3><h4 id=\"方法一\"><a href=\"#方法一\" class=\"headerlink\" title=\"方法一\"></a>方法一</h4><figure class=\"highlight objc\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"built_in\">NSArray</span>* nibView =  [[<span class=\"built_in\">NSBundle</span> mainBundle] loadNibNamed:<span class=\"string\">@\"xibfileName\"</span> owner:<span class=\"literal\">nil</span> options:<span class=\"literal\">nil</span>];</span><br><span class=\"line\"> <span class=\"built_in\">UIView</span> *xibView = nibView.lastObject;</span><br><span class=\"line\"><span class=\"comment\">//=======</span></span><br><span class=\"line\"> <span class=\"comment\">// 这里的bundle参数是nil,(这里nil默认就是mianBundle)</span></span><br><span class=\"line\"> <span class=\"built_in\">UINib</span> *nib = [<span class=\"built_in\">UINib</span> nibWithNibName:<span class=\"string\">@\"xib文件名\"</span> bundle:<span class=\"literal\">nil</span>];</span><br><span class=\"line\"> <span class=\"built_in\">NSArray</span> *views = [nib instantiateWithOwner:<span class=\"literal\">nil</span> options:<span class=\"literal\">nil</span>];</span><br></pre></td></tr></table></figure>\n<h4 id=\"方法二\"><a href=\"#方法二\" class=\"headerlink\" title=\"方法二\"></a>方法二</h4><p><code>owner</code>:xib中的fileObject参数<br><figure class=\"highlight objc\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//加载所有xib文件</span></span><br><span class=\"line\"><span class=\"built_in\">NSArray</span>* objects = [[<span class=\"built_in\">NSBundle</span> mainBundle] loadNibNamed:nibName owner:<span class=\"keyword\">self</span> options:<span class=\"literal\">nil</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//加载指定xib文件</span></span><br><span class=\"line\">ContactsTableViewCell  *cell = [[[<span class=\"built_in\">NSBundle</span> mainBundle]loadNibNamed:<span class=\"string\">@\"ContactsTableViewCell\"</span> owner:<span class=\"literal\">nil</span> options:<span class=\"literal\">nil</span>] objectAtIndex:<span class=\"number\">0</span>];</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"加载控制器对象\"><a href=\"#加载控制器对象\" class=\"headerlink\" title=\"加载控制器对象\"></a>加载控制器对象</h3><figure class=\"highlight objc\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">self</span> = [<span class=\"keyword\">super</span> initWithNibName:<span class=\"string\">@\"xibName\"</span> bundle:nibBundleOrNil];</span><br></pre></td></tr></table></figure>\n<h2 id=\"加载storyboard\"><a href=\"#加载storyboard\" class=\"headerlink\" title=\"加载storyboard\"></a>加载storyboard</h2><h3 id=\"加载控制器对象-1\"><a href=\"#加载控制器对象-1\" class=\"headerlink\" title=\"加载控制器对象\"></a>加载控制器对象</h3><figure class=\"highlight objc\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 加载storyboard</span></span><br><span class=\"line\"><span class=\"built_in\">UIStoryboard</span> *storyboard = [<span class=\"built_in\">UIStoryboard</span> storyboardWithName:<span class=\"string\">@\"Two\"</span> bundle:<span class=\"literal\">nil</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 创建storyboard里面灰色的控制器</span></span><br><span class=\"line\">　　　<span class=\"comment\">//找到shtoryboard里面设置的初始控制器</span></span><br><span class=\"line\">　　　<span class=\"comment\">//    UIViewController *vc = [storyboard instantiateInitialViewController];</span></span><br><span class=\"line\">　　　　　　　　</span><br><span class=\"line\">　　　　　　　<span class=\"comment\">// 从storyboard里面找出绑定标识的控制器</span></span><br><span class=\"line\">　　　　　　　MJTwoViewController *vc = [storyboard instantiateViewControllerWithIdentifier:<span class=\"string\">@\"pink\"</span>];</span><br><span class=\"line\">　　　　　　　<span class=\"keyword\">self</span>.window.rootViewController = vc;</span><br></pre></td></tr></table></figure>\n","categories":[{"name":"iOS","path":"api/categories/iOS.json"}],"tags":[]}