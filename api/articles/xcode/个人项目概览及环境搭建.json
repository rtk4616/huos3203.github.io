{"title":"个人项目概览及环境搭建","slug":"xcode/个人项目概览及环境搭建","date":"2017-06-22T11:25:08.000Z","updated":"2017-09-16T10:28:34.000Z","comments":true,"path":"api/articles/xcode/个人项目概览及环境搭建.json","excerpt":null,"covers":null,"content":"<link rel=\"stylesheet\" href=\"/owl.css\"><link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><script class=\"meting-secondary-script-marker\" src=\"/assets/js/Meting.min.js\"></script><h3 id=\"环境搭建说明\"><a href=\"#环境搭建说明\" class=\"headerlink\" title=\"环境搭建说明\"></a>环境搭建说明</h3><ol>\n<li><p>迁出项目<br>mupdf已合并到<code>PBBReader_Mac</code>项目中，迁出库即可</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://192.168.81.13/svn/PBBReader_Mac</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>运行PBB Reader项目</p>\n</li>\n</ol>\n<h3 id=\"发布pkg包\"><a href=\"#发布pkg包\" class=\"headerlink\" title=\"发布pkg包\"></a>发布pkg包</h3><p>运行target :<code>MakeInstaller</code>，它依赖<code>PBB Reader</code>项目,当运行时，如下过程：</p>\n<ol>\n<li>编译生成运行<code>PBB Reader.app</code>包</li>\n<li>通过<code>Packages</code>打包工具生成pkg安装包，生成pkg目录在<code>Distribution/ImportSVN/${timeDir}/</code>。<br>例如：<code>Distribution/ImportSVN/20170118/PbbReader for OS 1.0.4.0037α.pkg</code></li>\n<li>上传至SVN服务器<br>  方式一：可以在第二步中拿到pkg文件，手动上传。<br>  方式二：通过脚本来上传。<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#先判断svn目录是否存在,直接checkout目录导ImportSVN中</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> <span class=\"variable\">$ImportSVN</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"导入SVN成功：<span class=\"variable\">$SVNURL</span>/<span class=\"variable\">$&#123;timeDir&#125;</span>/<span class=\"variable\">$&#123;ProductName&#125;</span>.pkg\"</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>通过SVN脚本上传时，可以直接在<code>Distribution/releaseNote.md</code>文件中输入提交信息。</p>\n<h3 id=\"脚本清单\"><a href=\"#脚本清单\" class=\"headerlink\" title=\"脚本清单\"></a>脚本清单</h3><p>发布脚本目录：<code>Distribution/Packages/Script</code></p>\n<ol>\n<li><code>PreInstall.sh</code>:发布脚本,Xcode运行<code>MakeInstaller</code>执行的脚本。</li>\n<li><code>updateVersion.sh</code>:更新版本号脚本，读取<code>PBBReader-Info.plist</code>文件两个字段信息：<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CFBundleShortVersionString:版本号</span><br><span class=\"line\">CFBundleVersion:build版本号</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>将两个版本号组合成发布内测版本号后，更新<code>Welcome.html</code>文件中的版本信息块中。具体呈现在双击pkg安装包安装过程中，显示的app版本信息的内容。</p>\n","categories":[{"name":"项目","path":"api/categories/项目.json"},{"name":"发布","path":"api/categories/发布.json"}],"tags":[]}