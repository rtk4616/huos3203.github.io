{"total":157,"pageSize":10,"pageCount":16,"data":[{"title":"Git如何永久删除文件(包括历史记录)","slug":"git/Git如何永久删除文件(包括历史记录)","date":"2018-06-11T20:32:02.000Z","updated":"2018-06-11T20:32:02.000Z","comments":true,"path":"api/articles/git/Git如何永久删除文件(包括历史记录).json","excerpt":null,"keywords":null,"cover":null,"content":"<link rel=\"stylesheet\" href=\"/owl.css\"><link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><script class=\"meting-secondary-script-marker\" src=\"/assets/js/Meting.min.js\"></script><p>有些时候不小心上传了一些敏感文件(例如密码), 或者不想上传的文件(没及时或忘了加到.gitignore里的),</p>\n<p>而且上传的文件又特别大的时候, 这将导致别人clone你的代码或下载zip包的时候也必须更新或下载这些无用的文件,</p>\n<p>因此, 我们需要一个方法, 永久的删除这些文件(包括该文件的历史记录).</p>\n<p>首先, 可以参考 <a href=\"https://help.github.com/articles/remove-sensitive-data\" target=\"_blank\" rel=\"noopener\">github帮助</a></p>\n<h2 id=\"步骤一-从资料库中清除文件\"><a href=\"#步骤一-从资料库中清除文件\" class=\"headerlink\" title=\"步骤一: 从资料库中清除文件\"></a>步骤一: 从资料库中清除文件</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git filter-branch --force --index-filter <span class=\"string\">'git rm --cached --ignore-unmatch path-to-your-remove-file'</span> --prune-empty --tag-name-filter cat -- --all</span><br></pre></td></tr></table></figure>\n<p>其中, <code>path-to-your-remove-file</code> 是要删除的文件的相对路径(相对于git仓库的跟目录), 替换成你要删除的文件即可.</p>\n<blockquote>\n<p>这里的文件或文件夹，都不能以 ‘/‘ 开头，否则文件或文件夹会被认为是从 git 的安装目录开始。</p>\n<h3 id=\"删除文件夹\"><a href=\"#删除文件夹\" class=\"headerlink\" title=\"删除文件夹\"></a>删除文件夹</h3><p>在 <code>git rm --cached</code> 命令后面添加 <code>-r</code> 命令，表示递归的删除（子）文件夹和文件夹下的文件，类似于 <code>rm -rf</code> 命令:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git filter-branch --force --index-filter <span class=\"string\">'git rm --cached -r --ignore-unmatch path-to-your-remove-folder'</span> --prune-empty --tag-name-filter cat -- --all</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<h3 id=\"支持通配符\"><a href=\"#支持通配符\" class=\"headerlink\" title=\"支持通配符\"></a>支持通配符</h3><p>如果当要删除的文件很多, 文件或路径里有中文, 由于MinGW或CygWin对中文路径设置比较麻烦, 你可以使用通配符<em>号, 例如: `sound/music_</em>.mp3<code>, 这样就把</code>sound<code>目录下以</code>music_<code>开头的mp3文件都删除了.\n使用通配符</code>*`删除目录下的所有文件：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git filter-branch --force --index-filter <span class=\"string\">'git rm --cached -r --ignore-unmatch path-to-your-remove-folder/*'</span> --prune-empty --tag-name-filter cat -- --all</span><br></pre></td></tr></table></figure></p>\n<p>成功的日志：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Ref <span class=\"string\">'refs/heads/master'</span> was rewritten</span><br><span class=\"line\">Ref <span class=\"string\">'refs/remotes/origin/master'</span> was rewritten</span><br><span class=\"line\">WARNING: Ref <span class=\"string\">'refs/remotes/origin/master'</span> is unchanged</span><br><span class=\"line\">WARNING: Ref <span class=\"string\">'refs/tags/v0.9.0'</span> is unchanged</span><br><span class=\"line\">v0.9.0 -&gt; v0.9.0 (2694a7834dada67cf8768ef27e2d7c3d777f5472 -&gt; 2694a7834dada67cf8768ef27e2d7c3d777f5472)</span><br></pre></td></tr></table></figure></p>\n<p><code>Ref &#39;refs/heads/master&#39; was rewritten</code>:表示成功；<br><code>xxxxx unchanged</code>: 说明在当前分支里没有找到该文件.</p>\n<h2 id=\"步骤二-推送我们修改后的repo\"><a href=\"#步骤二-推送我们修改后的repo\" class=\"headerlink\" title=\"步骤二: 推送我们修改后的repo\"></a>步骤二: 推送我们修改后的repo</h2><h3 id=\"分支同步\"><a href=\"#分支同步\" class=\"headerlink\" title=\"分支同步\"></a>分支同步</h3><p>通过步骤一，需要以强制覆盖的方式推送你的repo, 命令如下:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git push --force origin master</span><br></pre></td></tr></table></figure></p>\n<p>这个过程其实是重新上传我们的repo, 比较耗时, 虽然跟删掉重新建一个repo有些类似, 但是好处是保留了原有的更新记录, 所以还是有些不同的. 如果你实在不在意这些更新记录, 也可以删掉重建, 两者也差不太多, 也许后者还更直观些.</p>\n<h3 id=\"tag同步\"><a href=\"#tag同步\" class=\"headerlink\" title=\"tag同步\"></a>tag同步</h3><p>为了能从打了 tag 的版本中也删除你所指定的文件或文件夹，您可以使用这样的命令来强制推送您的 Git tags：<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git push origin master --force --tags</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"步骤三-清理和回收空间\"><a href=\"#步骤三-清理和回收空间\" class=\"headerlink\" title=\"步骤三: 清理和回收空间\"></a>步骤三: 清理和回收空间</h2><p>虽然上面我们已经删除了文件, 但是我们的repo里面仍然保留了这些objects, 等待垃圾回收(GC), 所以我们要用命令彻底清除它, 并收回空间.</p>\n<p>执行命令，再查看<code>.git</code>目录空间会明显变小:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ rm -rf .git/refs/original/</span><br><span class=\"line\"></span><br><span class=\"line\">$ git reflog expire --expire=now --all</span><br><span class=\"line\"></span><br><span class=\"line\">$ git gc --prune=now</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Counting objects: 2437, <span class=\"keyword\">done</span>.</span><br><span class=\"line\"><span class=\"comment\"># Delta compression using up to 4 threads.</span></span><br><span class=\"line\"><span class=\"comment\"># Compressing objects: 100% (1378/1378), done.</span></span><br><span class=\"line\"><span class=\"comment\"># Writing objects: 100% (2437/2437), done.</span></span><br><span class=\"line\"><span class=\"comment\"># Total 2437 (delta 1461), reused 1802 (delta 1048)</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">$ git gc --aggressive --prune=now</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Counting objects: 2437, <span class=\"keyword\">done</span>.</span><br><span class=\"line\"><span class=\"comment\"># Delta compression using up to 4 threads.</span></span><br><span class=\"line\"><span class=\"comment\"># Compressing objects: 100% (2426/2426), done.</span></span><br><span class=\"line\"><span class=\"comment\"># Writing objects: 100% (2437/2437), done.</span></span><br><span class=\"line\"><span class=\"comment\"># Total 2437 (delta 1483), reused 0 (delta 0)</span></span><br></pre></td></tr></table></figure></p>\n","raw":null,"categories":[{"name":"git","path":"api/categories/git.json"}],"tags":[]},{"title":"5个图表解决工作中的12大难题","slug":"阅读/5个图表解决工作中的12大难题","date":"2018-06-11T19:43:53.000Z","updated":"2018-06-11T19:43:53.000Z","comments":true,"path":"api/articles/阅读/5个图表解决工作中的12大难题.json","excerpt":null,"keywords":null,"cover":"http://www.plantuml.com/plantuml/svg/TP7VIW915CRlvoa6OkaYs253h3M291zasnrtb_OVEjQjHKYabK4M5LIRb7jZ4MLWPhrCisDlqOmJsOLU37pd-yxvSGv37E9YI2y_Xb6SlFJPIPmqpsdd7hYuGA2DTHCNmTVWamTfrZvWJtrwLMCNkt82pAimEQmdHn7RVwNLhd3RhUIv2L8yQ5M63p5zxB7EwJXOc381vwOC93V7T73BQyJVzzqxzz0mgjEzCw7OJaz4INURnJMk0FRDtwqriJ2tii0F28RY8303_t1SIw3K4YcrX8hc_rWeCA0KkWu1siGRiZA5kgKxFk-PT4zsX9AKqLv5nx89c5rsF4kp2GarXC9KfhnLCErDTNs3g8ORb4tJLut0GoMY4yT0ZgTRk8JIIZwZh6QKnJKbdrQMSaekhuQ-jJBU5XZO9xW82m6l-4Vs6gnHfTTlBAg89cd_0000","content":"<link rel=\"stylesheet\" href=\"/owl.css\"><link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><script class=\"meting-secondary-script-marker\" src=\"/assets/js/Meting.min.js\"></script><h2 id=\"导图\"><a href=\"#导图\" class=\"headerlink\" title=\"导图\"></a>导图</h2><p><img src=\"http://www.plantuml.com/plantuml/svg/TP7VIW915CRlvoa6OkaYs253h3M291zasnrtb_OVEjQjHKYabK4M5LIRb7jZ4MLWPhrCisDlqOmJsOLU37pd-yxvSGv37E9YI2y_Xb6SlFJPIPmqpsdd7hYuGA2DTHCNmTVWamTfrZvWJtrwLMCNkt82pAimEQmdHn7RVwNLhd3RhUIv2L8yQ5M63p5zxB7EwJXOc381vwOC93V7T73BQyJVzzqxzz0mgjEzCw7OJaz4INURnJMk0FRDtwqriJ2tii0F28RY8303_t1SIw3K4YcrX8hc_rWeCA0KkWu1siGRiZA5kgKxFk-PT4zsX9AKqLv5nx89c5rsF4kp2GarXC9KfhnLCErDTNs3g8ORb4tJLut0GoMY4yT0ZgTRk8JIIZwZh6QKnJKbdrQMSaekhuQ-jJBU5XZO9xW82m6l-4Vs6gnHfTTlBAg89cd_0000\"></p>\n","raw":null,"categories":[{"name":"阅读","path":"api/categories/阅读.json"}],"tags":[]},{"title":"执法巡查开发状态总结","slug":"个人项目/执法巡查开发状态总结","date":"2018-06-05T10:18:33.000Z","updated":"2018-06-08T12:11:07.000Z","comments":true,"path":"api/articles/个人项目/执法巡查开发状态总结.json","excerpt":null,"keywords":null,"cover":"http://www.plantuml.com/plantuml/svg/TLFBRjfG4DtVh_2wKcZwI1UMsdqMMLLTLLsWs56GeX21fQf2GI02CU5XIaj9moEuWO1QrL25Gi4yViPpVRtY5thjwo13WhsmP-RCwyoC592EH0w6BMDQ9PeASj6AwMJssRmOu5WSAZE4ZiG3YJiK_O8OGizyN3IAqx-meXZZZA4FuA9ZVjMXUMOMKj4eUkwZiLHytO9f2PAjnIIBqsryLyArXFMzOFtCacwSp2j4TVNeXOypVrUiM1fAAUFV5UabIBVqRXUzN0OQzM5y2tAPg1squ-EiPCwSQZ2w0wLdwcUq12GU2svvuNq_xURLzZRtCI18X-ZzamzRMs-y5Q6mv9T4pbjL17a1IxofVy7rAXyGDfZ_w53Fy2oGsSvHsQgae20l9hBqwKHylREOfD4fycQYpapaGUaQUilbmCLGAwttlkPI2hG1pKEwFv1Nu9d02C6b7ivfD2F8AKlzQsTSmPBvETQRkAPIcYZAEhUvUsgg6cXN3y1MkGFZijkTCtuQSWL2w-BsWe9un1kJXXKhXgLWIDmLN4uVzO-uHiSjWfYt2oNTMvn8hkgOkwEwDtWZCiCfVT6ZwMpcsC8uUhi1ngUBhlRibVOApapOFcTDlMysucXDtjJr6epdw76GzWsk5vOwEqKjHl93KBvjTACtGxIvLTPmlWNA3KDxIsHJtlEVlBL3C0eUHA67H8TgJ7FCa_xOP-9Sfp7AG25lt-Bbp6oElUH3CGlDDZJxLb76ZI5C5BJ6dxkLzDaNZoKnn1q4W_I3xFEeNTktnnJ_0G00","content":"<link rel=\"stylesheet\" href=\"/owl.css\"><link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><script class=\"meting-secondary-script-marker\" src=\"/assets/js/Meting.min.js\"></script><h2 id=\"UML状态图\"><a href=\"#UML状态图\" class=\"headerlink\" title=\"UML状态图\"></a>UML状态图</h2><p>使用状态图，查漏补觉，梳理相关业务流程。<br>建议：优化流程，使用流程图（活动图）/时序图来完善流程<br><img src=\"http://www.plantuml.com/plantuml/svg/TLFBRjfG4DtVh_2wKcZwI1UMsdqMMLLTLLsWs56GeX21fQf2GI02CU5XIaj9moEuWO1QrL25Gi4yViPpVRtY5thjwo13WhsmP-RCwyoC592EH0w6BMDQ9PeASj6AwMJssRmOu5WSAZE4ZiG3YJiK_O8OGizyN3IAqx-meXZZZA4FuA9ZVjMXUMOMKj4eUkwZiLHytO9f2PAjnIIBqsryLyArXFMzOFtCacwSp2j4TVNeXOypVrUiM1fAAUFV5UabIBVqRXUzN0OQzM5y2tAPg1squ-EiPCwSQZ2w0wLdwcUq12GU2svvuNq_xURLzZRtCI18X-ZzamzRMs-y5Q6mv9T4pbjL17a1IxofVy7rAXyGDfZ_w53Fy2oGsSvHsQgae20l9hBqwKHylREOfD4fycQYpapaGUaQUilbmCLGAwttlkPI2hG1pKEwFv1Nu9d02C6b7ivfD2F8AKlzQsTSmPBvETQRkAPIcYZAEhUvUsgg6cXN3y1MkGFZijkTCtuQSWL2w-BsWe9un1kJXXKhXgLWIDmLN4uVzO-uHiSjWfYt2oNTMvn8hkgOkwEwDtWZCiCfVT6ZwMpcsC8uUhi1ngUBhlRibVOApapOFcTDlMysucXDtjJr6epdw76GzWsk5vOwEqKjHl93KBvjTACtGxIvLTPmlWNA3KDxIsHJtlEVlBL3C0eUHA67H8TgJ7FCa_xOP-9Sfp7AG25lt-Bbp6oElUH3CGlDDZJxLb76ZI5C5BJ6dxkLzDaNZoKnn1q4W_I3xFEeNTktnnJ_0G00\"></p>\n","raw":null,"categories":[{"name":"个人项目","path":"api/categories/个人项目.json"}],"tags":[]},{"title":"uml活动图常用语法","slug":"hexo/uml活动图常用语法","date":"2018-06-04T21:27:15.000Z","updated":"2018-06-04T21:27:15.000Z","comments":true,"path":"api/articles/hexo/uml活动图常用语法.json","excerpt":null,"keywords":null,"cover":"http://www.plantuml.com/plantuml/svg/NL6xZiCW4Epv2agxoGSunHMHShekIhu0mJX6uS2tkqwKlpzZJ5uDiBipEwE1nP2eRXUylPn0rm3P32QwW2F-9h0qxLPr4JSzcZEsolUwESolJOeds8cyt7S3xANLCY3gHcX2gxeLyXFziY2pFEyJtGovhugDAICfMJ1hcw9G2bp0kV9nWXxBsCVp6uqbZGhH-Lwjom-9vG6vWvycyYIRG61KqJBvHXaiUshpE9UWPx_GUZDVxQkaIvhWFC5-wjPsDL-aAwd_IA5mrcpcbKlgRswBe-K3jE1t34RmSBUSEOv_","content":"<link rel=\"stylesheet\" href=\"/owl.css\"><link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><script class=\"meting-secondary-script-marker\" src=\"/assets/js/Meting.min.js\"></script><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">start</span><br><span class=\"line\">:ClickServlet.handleRequest();</span><br><span class=\"line\">:new page;</span><br><span class=\"line\">if (Page.onSecurityCheck) then (true)</span><br><span class=\"line\">:Page.onInit();</span><br><span class=\"line\">if (isForward?) then (no)</span><br><span class=\"line\">:Process controls;</span><br><span class=\"line\">if (continue processing?) then (no)</span><br><span class=\"line\">stop</span><br><span class=\"line\">endif</span><br><span class=\"line\"></span><br><span class=\"line\">if (isPost?) then (yes)</span><br><span class=\"line\">:Page.onPost();</span><br><span class=\"line\">else (no)</span><br><span class=\"line\">:Page.onGet();</span><br><span class=\"line\">endif</span><br><span class=\"line\">:Page.onRender();</span><br><span class=\"line\">endif</span><br><span class=\"line\">else (false)</span><br><span class=\"line\">endif</span><br><span class=\"line\"></span><br><span class=\"line\">if (do redirect?) then (yes)</span><br><span class=\"line\">:redirect process;</span><br><span class=\"line\">else</span><br><span class=\"line\">if (do forward?) then (yes)</span><br><span class=\"line\">:Forward request;</span><br><span class=\"line\">else (no)</span><br><span class=\"line\">:Render page template;</span><br><span class=\"line\">endif</span><br><span class=\"line\">endif</span><br><span class=\"line\">stop</span><br></pre></td></tr></table></figure>\n<p><img src=\"http://www.plantuml.com/plantuml/svg/NL6xZiCW4Epv2agxoGSunHMHShekIhu0mJX6uS2tkqwKlpzZJ5uDiBipEwE1nP2eRXUylPn0rm3P32QwW2F-9h0qxLPr4JSzcZEsolUwESolJOeds8cyt7S3xANLCY3gHcX2gxeLyXFziY2pFEyJtGovhugDAICfMJ1hcw9G2bp0kV9nWXxBsCVp6uqbZGhH-Lwjom-9vG6vWvycyYIRG61KqJBvHXaiUshpE9UWPx_GUZDVxQkaIvhWFC5-wjPsDL-aAwd_IA5mrcpcbKlgRswBe-K3jE1t34RmSBUSEOv_\"></p>\n<p>title <code>uml模型图题目支持MD</code><br>center header<br><code>在此处添加标头</code><br>endheader<br>start ‘开始’<br>‘&gt;&gt;&gt;&gt;&gt; 活动关系模块 支持嵌套，条件/循环/并行&gt;&gt;&gt;&gt;&gt;&gt;’<br>if(<code>环境条件</code>) then (<code>分流线名</code>)<br>:<code>分支1活动</code>;<br>-[<code>颜色</code>]-&gt; <code>线备注</code>;<br>note left<br><code>活动备注</code><br>end note<br>elseif(<code>分流线名</code>)<br>:<code>分支2活动</code>;<br>else (<code>分流线名</code>)<br>:<code>分支3活动</code>;<br>endif</p>\n<p>repeat<br>:<code>循环活动</code>;<br>repeat while (<code>环境条件</code>)</p>\n<p>while (<code>环境条件</code>)<br>:<code>循环活动</code>;<br>endwhile</p>\n<p>fork<br>:<code>并行活动</code>;<br>fork again<br>:<code>并行活动</code>;<br>end fork</p>\n<p>‘&amp;&amp;&amp;&amp;&amp; 活动图组合模块 &amp;&amp;&amp;&amp;&amp;&amp;’<br>partition <code>活动组名</code>{<br>:<code>单元活动名称</code>;<br>}</p>\n<p>|<code>#颜色</code> | <code>泳道名称</code>|<br>:<code>当前泳道活动</code>;</p>\n<p>stop ‘结束／end关键字’<br>center footer<br><code>在此处添加脚注</code><br>endfooter</p>\n","raw":null,"categories":[{"name":"uml","path":"api/categories/uml.json"}],"tags":[]},{"title":"uml用例图常用语法","slug":"hexo/uml用例图常用语法","date":"2018-06-04T21:20:41.000Z","updated":"2018-06-04T21:27:15.000Z","comments":true,"path":"api/articles/hexo/uml用例图常用语法.json","excerpt":null,"keywords":null,"cover":"http://www.plantuml.com/plantuml/svg/NKyn3eCm3DppYXCJ36LWPAZ40yhITkjYm2sfWeEIgEhpcmJKIfMYv7ntFiVjYRIWcnOjBSXlI9LNpmWpWzRLw962jb8bEGcLKl5sE1nHdWEvKErr8ZOzfqJYnuWD3ASVSu2zRrFGuZ9hZtX8m6zQLiFrltNhxv3PCHh9U8k1OGMUN-p8m6XXhrYcxDeJYXoUONn7Ay9ZuEacmNuRxV2CfA-Bj5lVg7qVr7Mg-YQ1_84F","content":"<link rel=\"stylesheet\" href=\"/owl.css\"><link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><script class=\"meting-secondary-script-marker\" src=\"/assets/js/Meting.min.js\"></script><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">:Main Admin: as Admin</span><br><span class=\"line\">(Use the application) as (Use)</span><br><span class=\"line\"></span><br><span class=\"line\">User -&gt; (Start)</span><br><span class=\"line\">User --&gt; (Use)</span><br><span class=\"line\"></span><br><span class=\"line\">Admin ---&gt; (Use)</span><br><span class=\"line\"></span><br><span class=\"line\">note right of Admin : This is an example.</span><br><span class=\"line\"></span><br><span class=\"line\">note right of (Use)</span><br><span class=\"line\">A note can also be on several lines</span><br><span class=\"line\">end note</span><br><span class=\"line\"></span><br><span class=\"line\">note &quot;This note is connected\\nto several objects.&quot; as N2</span><br><span class=\"line\">(Start) .. N2</span><br><span class=\"line\">N2 .. (Use)</span><br></pre></td></tr></table></figure>\n<p>效果图<br><img src=\"http://www.plantuml.com/plantuml/svg/NKyn3eCm3DppYXCJ36LWPAZ40yhITkjYm2sfWeEIgEhpcmJKIfMYv7ntFiVjYRIWcnOjBSXlI9LNpmWpWzRLw962jb8bEGcLKl5sE1nHdWEvKErr8ZOzfqJYnuWD3ASVSu2zRrFGuZ9hZtX8m6zQLiFrltNhxv3PCHh9U8k1OGMUN-p8m6XXhrYcxDeJYXoUONn7Ay9ZuEacmNuRxV2CfA-Bj5lVg7qVr7Mg-YQ1_84F\"></p>\n<p>title <code>uml模型图题目支持MD</code><br>center header<br><code>在此处添加标头</code><br>endheader</p>\n<p>‘<strong><em>*</em></strong>  声明用例模块 usecase <strong><em>*</em></strong>‘<br>(<code>用例名称</code>) as (<code>别名</code>) &lt;&lt;<code>构造类型</code>&gt;&gt;</p>\n<h2 id=\"usecase-用例名称-as-“-描述一\"><a href=\"#usecase-用例名称-as-“-描述一\" class=\"headerlink\" title=\"usecase 用例名称 as “ 描述一\"></a>usecase <code>用例名称</code> as “ <code>描述一</code></h2><h1 id=\"描述2\"><a href=\"#描述2\" class=\"headerlink\" title=\"描述2\"></a><code>描述2</code></h1><p><code>描述3</code><br>.. <code>描述标题</code> ..<br><code>描述4</code><br>“<br>‘<strong><em>*</em></strong>  声明角色模块 actor <strong><em>*</em></strong>‘<br>:<code>角色名称</code>: as <code>别名</code><br>actor <code>角色名称</code></p>\n<p>‘—- 声明备注:用例线备注可以当做用例来参与到关系连接中—‘<br>note “<code>备注内容</code>“ as <code>备注对象</code></p>\n<p>‘#####  备注模块 位置：left/right/top/bottom  #####’<br>note <code>位置</code>  of <code>用例/角色</code>: <code>描述信息</code></p>\n<p>‘&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;  关系模块  &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;’<br>left to right dirction  ‘指定布局方向’<br><code>角色</code> –&gt; <code>用例</code>:<code>关系线描述</code></p>\n<p>‘—- 用例关系中的备注对象 —-‘<br><code>角色</code> –&gt;<code>备注对象</code><br><code>备注对象</code> –&gt;<code>用例</code></p>\n<p>center footer<br><code>在此处添加脚注</code><br>endfooter</p>\n","raw":null,"categories":[{"name":"uml","path":"api/categories/uml.json"}],"tags":[]},{"title":"uml类图常用语法","slug":"hexo/uml类图常用语法","date":"2018-06-04T20:49:36.000Z","updated":"2018-06-04T21:27:15.000Z","comments":true,"path":"api/articles/hexo/uml类图常用语法.json","excerpt":null,"keywords":null,"cover":"http://www.plantuml.com/plantuml/svg/Iyv9B2vMS4eiJdK6iRZo4dDJYmiIarCLyb9Bz59AStCh5PHTm42XcaiFhb31faPNLo4WjQWuFu_BDpMr93ClNI4V8OIgKW6gWgiMpOAq_7oWiN2hz22wmLgm6WGNHcZ1Odaj5vecaEhIlDBYr1Ie3G00","content":"<link rel=\"stylesheet\" href=\"/owl.css\"><link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><script class=\"meting-secondary-script-marker\" src=\"/assets/js/Meting.min.js\"></script><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class BaseClass</span><br><span class=\"line\">namespace net.dummy #DDDDDD &#123;</span><br><span class=\"line\">.BaseClass &lt;|-- Person</span><br><span class=\"line\">Meeting o-- Person</span><br><span class=\"line\">.BaseClass &lt;|- Meeting</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">namespace net.foo &#123;</span><br><span class=\"line\">net.dummy.Person &lt;|- Person</span><br><span class=\"line\">.BaseClass &lt;|-- Person</span><br><span class=\"line\">net.dummy.Meeting o-- Person</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">BaseClass &lt;|-- net.unused.Person</span><br></pre></td></tr></table></figure>\n<p>效果图：<br><img src=\"http://www.plantuml.com/plantuml/svg/Iyv9B2vMS4eiJdK6iRZo4dDJYmiIarCLyb9Bz59AStCh5PHTm42XcaiFhb31faPNLo4WjQWuFu_BDpMr93ClNI4V8OIgKW6gWgiMpOAq_7oWiN2hz22wmLgm6WGNHcZ1Odaj5vecaEhIlDBYr1Ie3G00\"></p>\n<p>title <code>uml模型图题目支持MD</code><br>center header<br><code>在此处添加标头</code><br>endheader</p>\n<p>‘<strong><em>*</em></strong> 类声明模块 <strong><em>*</em></strong>‘<br>‘类型:class,abstract,interface,annotation,enum’<br>‘访问域:(-)私有,(#)保护,(~)包私有,(+)公有’</p>\n<p>class <code>类名</code>&lt;<code>扩展对象</code>&gt; as <code>类别名</code>{<br>– <code>属性组名</code> – ‘分隔符–,..,==,<strong>‘<br><code>访问域修饰符</code> <code>static/abstract</code> <code>属性名称</code>:<code>类型</code> = <code>值1</code>\n</strong> <code>函数组名</code> __<br><code>访问域修饰符</code> func <code>函数名称</code>(<code>参数1</code>:<code>类型</code>,<code>参数2</code>:<code>类型</code>)<br>}<br>‘显示/隐藏类,类方法属性等 关键字支持class,interface,enum’<br>hide <code>类名/方法名</code></p>\n<p>‘—- 声明类关系线备注,可以当做用例来参与到关系连接中 —‘<br>note “<code>备注内容</code>“ as <code>备注对象</code></p>\n<p>‘多行备注对象’<br>note as <code>备注对象</code><br>“<code>备注内容</code>“<br>end note</p>\n<p>‘###### 类备注模块 类声明末尾使用:note 位置: 备注#########’<br>note <code>left/right/top/bottom</code> of <code>object</code> #<code>颜色</code><br><code>支持markdown语法加粗／斜体／删除线／下划线／波浪下划线 和HTML</code><br>end note</p>\n<p>‘&amp;&amp;&amp;&amp;&amp;&amp; 类组合模块 类模块 &amp;&amp;&amp;&amp;&amp;&amp;&amp;’<br>‘六种组合样式:Node,Rectangle,Folder,Frame,Cloud,Database’<br>scale  <code>750</code> <code>width/height</code><br>package <code>module名</code> &lt;&lt;<code>模块样式</code>&gt;&gt; <code>#背景色</code>{<br>class <code>类名</code>&lt;<code>扩展对象</code>&gt; as <code>类别名</code>{<br>– <code>属性组名</code> – ‘分隔符–,..,==,<strong>‘<br><code>访问域修饰符</code> <code>static/abstract</code> <code>属性名称</code>:<code>类型</code> = <code>值1</code>\n</strong> <code>函数组名</code> __<br><code>访问域修饰符</code> func <code>函数名称</code>(<code>参数1</code>:<code>类型</code>,<code>参数2</code>:<code>类型</code>)<br>}<br>}</p>\n<p>‘@@@@@@@ 命名空间模块 关系模块  @@@@@@@@’<br>namespace <code>com.cn</code> #<code>空间背景色</code>{</p>\n<p>‘关系节点符:(|&gt;)继承,(*)合成 ,(o)聚合, 其他#,x,},+,^ 连线符:(–)实线 ，(..)虚线’<br><code>类名/包名</code>“<code>基数</code>“ <code>节点符</code> <code>left/right..``[#线色]</code>-<code>节点符</code> “<code>基数</code>“<code>类名/包名</code>:<code>消息</code> &gt;<br>note <code>left/right/top/bottom</code> on link #<code>颜色</code><br><code>连接注释体</code><br>end note}</p>\n<p>‘&gt;&gt;&gt;&gt;&gt;&gt; 类关系图及连接备注模块 &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;’<br>‘关系节点符:(|&gt;)继承,(*)合成 ,(o)聚合, 其他#,x,},+,^ 连线符:(–)实线 ，(..)虚线’<br><code>类名/包名</code>“<code>基数</code>“ <code>节点符</code> <code>left/right..``[#线色]</code>-<code>节点符</code> “<code>基数</code>“<code>类名/包名</code>:<code>消息</code> &gt;<br>note <code>left/right/top/bottom</code> on link #<code>颜色</code><br><code>连接注释体</code><br>end note</p>\n<p>center footer<br><code>在此处添加脚注</code><br>endfooter</p>\n","raw":null,"categories":[{"name":"uml","path":"api/categories/uml.json"}],"tags":[]},{"title":"在Mac安装Fiddler","slug":"工具/在Mac安装Fiddler","date":"2018-05-31T16:38:52.000Z","updated":"2018-06-01T10:07:54.000Z","comments":true,"path":"api/articles/工具/在Mac安装Fiddler.json","excerpt":null,"keywords":null,"cover":null,"content":"<link rel=\"stylesheet\" href=\"/owl.css\"><link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><script class=\"meting-secondary-script-marker\" src=\"/assets/js/Meting.min.js\"></script><h3 id=\"安装Mono\"><a href=\"#安装Mono\" class=\"headerlink\" title=\"安装Mono\"></a>安装Mono</h3><p>Mac下需要使用.Net编译后的程序，首先需要用到跨平台的方案<code>Mono</code>(现阶段微软已推出跨平台的方案.Net Core，不过暂时只支持控制台程序)。<br><a href=\"http://www.mono-project.com/download/stable/#download-mac\" target=\"_blank\" rel=\"noopener\">下载地址</a></p>\n<h3 id=\"配置Mono环境\"><a href=\"#配置Mono环境\" class=\"headerlink\" title=\"配置Mono环境\"></a>配置Mono环境</h3><ol>\n<li>下载证书<br>从Mozilla LXR上下载所有受信任的root证书，存于Mono的证书库里。root证书能用于请求https地址：<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$cd /Library/Frameworks/Mono.framework/Versions/&lt;mono version&gt;/bin/</span><br><span class=\"line\">$./mozroots --import --sync</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<blockquote>\n<p>./mozroots命令失效，./cert-sync新命令，暂时不知道怎么使用</p>\n<ol>\n<li>配置Mono环境变量</li>\n</ol>\n</blockquote>\n<p>在<code>.bash_profile</code>中加入如下内容<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export MONO_HOME=/Library/Frameworks/Mono.framework/Versions/5.0.1</span><br><span class=\"line\">export PATH=$PATH:$MONO_HOME/bin</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"Fiddler\"><a href=\"#Fiddler\" class=\"headerlink\" title=\"Fiddler\"></a>Fiddler</h2><p><a href=\"http://docs.telerik.com/fiddler/Configure-Fiddler/Tasks/InstallFiddler\" target=\"_blank\" rel=\"noopener\">官方文档</a></p>\n<h3 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h3><p>下载<a href=\"https://www.telerik.com/download/fiddler\" target=\"_blank\" rel=\"noopener\">Fiddler-mac.zip</a>压缩包，解压到非中文字符的路径下。</p>\n<h3 id=\"运行\"><a href=\"#运行\" class=\"headerlink\" title=\"运行\"></a>运行</h3><p>打开Terminal，进入到刚才解压的Fiddler路径，执行命令运行：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo mono Fiddler.exe</span><br></pre></td></tr></table></figure></p>\n<p><a href=\"http://www.cocoachina.com/apple/20170704/19729.html\" target=\"_blank\" rel=\"noopener\">参看</a></p>\n","raw":null,"categories":[{"name":"工具","path":"api/categories/工具.json"}],"tags":[]},{"title":"","slug":"hexo/hexo博文置顶方法","date":"2018-05-31T11:44:33.000Z","updated":"2018-05-31T12:10:07.000Z","comments":true,"path":"api/articles/hexo/hexo博文置顶方法.json","excerpt":null,"keywords":null,"cover":null,"content":"<link rel=\"stylesheet\" href=\"/owl.css\"><link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><script class=\"meting-secondary-script-marker\" src=\"/assets/js/Meting.min.js\"></script><p>修改 <code>hero-generator-index</code> 插件，把文件：<code>node_modules/hexo-generator-index/lib/generator.js</code> 内的代码替换为：<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">'use strict'</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> pagination = <span class=\"built_in\">require</span>(<span class=\"string\">'hexo-pagination'</span>);</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">locals</span>)</span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">var</span> config = <span class=\"keyword\">this</span>.config;</span><br><span class=\"line\"><span class=\"keyword\">var</span> posts = locals.posts;</span><br><span class=\"line\">    posts.data = posts.data.sort(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">a, b</span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(a.top &amp;&amp; b.top) &#123; <span class=\"comment\">// 两篇文章top都有定义</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span>(a.top == b.top) <span class=\"keyword\">return</span> b.date - a.date; <span class=\"comment\">// 若top值一样则按照文章日期降序排</span></span><br><span class=\"line\">                <span class=\"keyword\">else</span> <span class=\"keyword\">return</span> b.top - a.top; <span class=\"comment\">// 否则按照top值降序排</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(a.top &amp;&amp; !b.top) &#123; <span class=\"comment\">// 以下是只有一篇文章top有定义，那么将有top的排在前面（这里用异或操作居然不行233）</span></span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(!a.top &amp;&amp; b.top) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span> <span class=\"keyword\">return</span> b.date - a.date; <span class=\"comment\">// 都没定义按照文章日期降序排</span></span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> paginationDir = config.pagination_dir || <span class=\"string\">'page'</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> pagination(<span class=\"string\">''</span>, posts, &#123;</span><br><span class=\"line\">        perPage: config.index_generator.per_page,</span><br><span class=\"line\">        layout: [<span class=\"string\">'index'</span>, <span class=\"string\">'archive'</span>],</span><br><span class=\"line\">        format: paginationDir + <span class=\"string\">'/%d/'</span>,</span><br><span class=\"line\">        data: &#123;</span><br><span class=\"line\">            __index: <span class=\"literal\">true</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></p>\n<p>在文章中添加 <code>top</code> 值，数值越大文章越靠前:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">title: 解决Charles乱码问题</span><br><span class=\"line\">date: 2017-05-22 22:45:48</span><br><span class=\"line\">tags: 技巧</span><br><span class=\"line\">categories: 技巧</span><br><span class=\"line\">copyright: true</span><br><span class=\"line\">top: 100</span><br></pre></td></tr></table></figure></p>\n<p>转：<a href=\"https://segmentfault.com/a/1190000009544924\" target=\"_blank\" rel=\"noopener\">hexo的next主题个性化配置教程</a></p>\n","raw":null,"categories":[{"name":"分类","path":"api/categories/分类.json"}],"tags":[]},{"title":"+0800格式转NSDate","slug":"iOS/+0800格式转NSDate","date":"2018-05-30T18:42:20.000Z","updated":"2018-05-30T18:42:20.000Z","comments":true,"path":"api/articles/iOS/+0800格式转NSDate.json","excerpt":null,"keywords":null,"cover":null,"content":"<link rel=\"stylesheet\" href=\"/owl.css\"><link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><script class=\"meting-secondary-script-marker\" src=\"/assets/js/Meting.min.js\"></script><figure class=\"highlight objc\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">NSString</span> *timstr = [resData objectForKey:<span class=\"string\">@\"Data\"</span>];</span><br><span class=\"line\">timstr = [timstr stringByReplacingOccurrencesOfString:<span class=\"string\">@\"/Date(\"</span> withString:<span class=\"string\">@\"\"</span>];</span><br><span class=\"line\">timstr = [timstr stringByReplacingOccurrencesOfString:<span class=\"string\">@\"+0800)/\"</span> withString:<span class=\"string\">@\"\"</span>];</span><br><span class=\"line\">model.time = [<span class=\"built_in\">NSDate</span> dateWithTimeIntervalSince1970:timstr.longLongValue/<span class=\"number\">1000</span>];</span><br></pre></td></tr></table></figure>\n","raw":null,"categories":[{"name":"iOS","path":"api/categories/iOS.json"}],"tags":[]},{"title":"高德地图API使用","slug":"iOS/高德地图API使用","date":"2018-05-30T14:40:56.000Z","updated":"2018-05-30T18:42:20.000Z","comments":true,"path":"api/articles/iOS/高德地图API使用.json","excerpt":null,"keywords":null,"cover":null,"content":"<link rel=\"stylesheet\" href=\"/owl.css\"><link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><script class=\"meting-secondary-script-marker\" src=\"/assets/js/Meting.min.js\"></script><h2 id=\"引入头文件\"><a href=\"#引入头文件\" class=\"headerlink\" title=\"引入头文件\"></a>引入头文件</h2><figure class=\"highlight objc\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#import <span class=\"meta-string\">&lt;AMapFoundationKit/AMapFoundationKit.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#import <span class=\"meta-string\">&lt;AMapLocationKit/AMapLocationKit.h&gt;</span></span></span><br></pre></td></tr></table></figure>\n<h2 id=\"调用方法\"><a href=\"#调用方法\" class=\"headerlink\" title=\"调用方法\"></a>调用方法</h2><figure class=\"highlight objc\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">NSString</span> *strKey = <span class=\"string\">@\"2d8a96d668576584acebf2bab0ba0c08\"</span>;<span class=\"comment\">//默认值</span></span><br><span class=\"line\"><span class=\"comment\">//配置里面取值</span></span><br><span class=\"line\"><span class=\"built_in\">NSString</span> *strBundleKey = [[<span class=\"built_in\">NSBundle</span> mainBundle] infoDictionary][<span class=\"string\">@\"IOSPostionkey\"</span>];</span><br><span class=\"line\"><span class=\"keyword\">if</span> (strBundleKey) &#123;</span><br><span class=\"line\">    strKey = strBundleKey;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">[AMapServices sharedServices].apiKey = strKey;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 带逆地理信息的一次定位（返回坐标和地址信息）</span></span><br><span class=\"line\"><span class=\"keyword\">self</span>.GaodelocationManager = [[AMapLocationManager alloc] init];</span><br><span class=\"line\">[<span class=\"keyword\">self</span>.GaodelocationManager setDesiredAccuracy:kCLLocationAccuracyHundredMeters];</span><br><span class=\"line\"><span class=\"comment\">//   定位超时时间，最低2s，此处设置为2s</span></span><br><span class=\"line\"><span class=\"keyword\">self</span>.GaodelocationManager.locationTimeout =<span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"comment\">//   逆地理请求超时时间，最低2s，此处设置为2s</span></span><br><span class=\"line\"><span class=\"keyword\">self</span>.GaodelocationManager.reGeocodeTimeout = <span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"comment\">//设置不允许系统暂停定位</span></span><br><span class=\"line\">[<span class=\"keyword\">self</span>.GaodelocationManager setPausesLocationUpdatesAutomatically:<span class=\"literal\">NO</span>];</span><br><span class=\"line\"><span class=\"comment\">//    //设置允许在后台定位</span></span><br><span class=\"line\"><span class=\"comment\">//    [locationManager setAllowsBackgroundLocationUpdates:YES];</span></span><br><span class=\"line\"><span class=\"comment\">//设置允许连续定位逆地理</span></span><br><span class=\"line\">[<span class=\"keyword\">self</span>.GaodelocationManager setLocatingWithReGeocode:<span class=\"literal\">YES</span>];</span><br><span class=\"line\"><span class=\"comment\">//    [locationManager setDelegate:self];</span></span><br><span class=\"line\"><span class=\"comment\">// [self.locationManager startUpdatingLocation];</span></span><br><span class=\"line\"><span class=\"comment\">//    // 带逆地理（返回坐标和地址信息）。将下面代码中的 YES 改成 NO ，则不会返回地址信息。</span></span><br><span class=\"line\">[<span class=\"keyword\">self</span>.GaodelocationManager requestLocationWithReGeocode:<span class=\"literal\">YES</span> completionBlock:^(<span class=\"built_in\">CLLocation</span> *gaodeLocation, AMapLocationReGeocode *regeocode, <span class=\"built_in\">NSError</span> *error) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (gaodeLocation==<span class=\"literal\">nil</span>) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">NSLog</span>(<span class=\"string\">@\"高德没有返回地理位置,使用苹果官方定位经纬度\"</span>);</span><br><span class=\"line\">        [<span class=\"keyword\">self</span> GetGISInfoByByLocationWithjingdu:jingdu AndWeidu:weidu];</span><br><span class=\"line\">        <span class=\"keyword\">return</span> ;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (error)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">NSLog</span>(<span class=\"string\">@\"locError:&#123;%ld - %@&#125;;\"</span>, (<span class=\"keyword\">long</span>)error.code, error.localizedDescription);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (error.code == AMapLocationErrorLocateFailed)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"built_in\">NSLog</span>(<span class=\"string\">@\"AMapLocationErrorLocateFailed高德没有返回地理位置,使用苹果官方定位经纬度\"</span>);</span><br><span class=\"line\">            [<span class=\"keyword\">self</span> GetGISInfoByByLocationWithjingdu:jingdu AndWeidu:weidu];</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">NSLog</span>(<span class=\"string\">@\"使用高德location:%@\"</span>, gaodeLocation);</span><br><span class=\"line\">    <span class=\"built_in\">NSString</span> * gaodeWeidu =  [<span class=\"built_in\">NSString</span> stringWithFormat:<span class=\"string\">@\"%.9f\"</span>,gaodeLocation.coordinate.latitude];</span><br><span class=\"line\">    <span class=\"built_in\">NSString</span> * gaodeJingdu =  [<span class=\"built_in\">NSString</span> stringWithFormat:<span class=\"string\">@\"%.9f\"</span>,gaodeLocation.coordinate.longitude];</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (regeocode)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">NSLog</span>(<span class=\"string\">@\"reGeocode:%@\"</span>, regeocode);</span><br><span class=\"line\">        <span class=\"keyword\">self</span>.theRealAdress = regeocode.formattedAddress;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    [<span class=\"keyword\">self</span> GetGISInfoByByLocationWithjingdu:gaodeJingdu AndWeidu:gaodeWeidu];</span><br><span class=\"line\">&#125;];</span><br></pre></td></tr></table></figure>\n","raw":null,"categories":[{"name":"iOS","path":"api/categories/iOS.json"}],"tags":[]}]}